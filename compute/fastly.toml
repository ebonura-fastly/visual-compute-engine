authors = ["Fastly <mss@fastly.com>"]
description = "MSS Engine v1.0.0 - Graph-based edge security rules"
language = "rust"
manifest_version = 3
name = "mss-engine"

[scripts]
build = "cargo build --bin mss-engine --release --target wasm32-wasip1 --color always"

[setup]
[setup.backends]
[setup.backends.protected_origin]
description = "Default backend for unmatched requests"
address = "httpbingo.org"
port = 443
ssl_cert_hostname = "httpbingo.org"
ssl_check_cert = true
ssl_sni_hostname = "httpbingo.org"
use_ssl = true

[local_server]
[local_server.config_stores]
[local_server.config_stores.security_rules]
format = "json"
file = "security-rules.json"

[local_server.config_stores.mss_shared_secret]
format = "inline-toml"
contents.compute_auth_key = "development-secret-key-123"

[local_server.backends]
[local_server.backends.protected_origin]
url = "https://httpbingo.org"
override_host = "httpbingo.org"

# Edge Rate Limiting resources
[local_server.rate_counter]
[local_server.rate_counter.mss_rate_counter]

[local_server.penalty_box]
[local_server.penalty_box.mss_penalty_box]
