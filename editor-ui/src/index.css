/*
 * VCE Minimal Styles
 * Only layout + React Flow overrides
 * All component styling comes from beacon-mantine
 * Uses beacon-tokens CSS variables
 */

/* ===========================================
 * App Layout
 * =========================================== */

/* TopNav height token - matches Uniform */
:root {
  --SIZE--TopNav--height: 68px;
}

.vce-app {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--canvas-bg);
}

.vce-main {
  display: flex;
  flex: 1;
  min-height: 0;
  margin-top: var(--SIZE--TopNav--height); /* Account for fixed header */
}

.vce-canvas {
  flex: 1;
  position: relative;
}

/* ===========================================
 * Sidebar Layout - Uniform styling
 * =========================================== */

.vce-sidebar {
  width: 340px;
  background: var(--COLOR--surface--primary);
  border-right: 1px solid var(--COLOR--border--primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.vce-sidebar-tabs-container {
  flex-shrink: 0;
  border-bottom: 1px solid var(--COLOR--border--primary);
}

.vce-sidebar-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

.vce-sidebar-content > * {
  animation: vce-fade-in 200ms ease-out;
}

@keyframes vce-fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Components Tab */
.vce-components-tab,
.vce-templates-tab {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: var(--LAYOUT--spacing--2);
}

/* Draggable node items - Uniform styling */
.vce-node-item {
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--4);
  padding-left: calc(var(--LAYOUT--spacing--4) + 3px);
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-left: 3px solid var(--node-input-header);
  border-radius: 4px;
  cursor: grab;
  transition: all 130ms ease-in-out;
}

.vce-node-item:hover {
  background: var(--COLOR--surface--secondary);
  border-color: var(--COLOR--border--primary--hover);
}

.vce-node-item:active {
  cursor: grabbing;
  background: var(--COLOR--action--surface--selected);
  border-color: var(--COLOR--action--border);
}

/* Node item category colors */
.vce-node-item[data-category="input"] { border-left-color: var(--node-input-header); }
.vce-node-item[data-category="condition"] { border-left-color: var(--node-condition-header); }
.vce-node-item[data-category="logic"] { border-left-color: var(--node-logic-header); }
.vce-node-item[data-category="action"] { border-left-color: var(--node-action-header); }
.vce-node-item[data-category="routing"] { border-left-color: var(--node-routing-header); }

/* Template cards - Uniform styling */
.vce-template-card {
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--4);
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-radius: 4px;
  cursor: pointer;
  transition: all 130ms ease-in-out;
}

.vce-template-card:hover {
  background: var(--COLOR--surface--secondary);
  border-color: var(--COLOR--border--primary--hover);
}

.vce-template-card:active {
  background: var(--COLOR--action--surface--selected);
  border-color: var(--COLOR--action--border);
}

/* Fastly Tab */
.vce-fastly-content {
  padding: var(--LAYOUT--spacing--4);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: auto;
  gap: var(--LAYOUT--spacing--3);
}

/* ===========================================
 * React Flow Overrides
 * =========================================== */

.react-flow {
  background: var(--canvas-bg) !important;
}

.react-flow__background pattern circle {
  fill: var(--canvas-dots);
}

.react-flow__edge-path {
  stroke: var(--COLOR--border--secondary);
  stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:hover .react-flow__edge-path {
  stroke: var(--COLOR--action--border);
}

/* ===========================================
 * Panels (Test & Deploy)
 * =========================================== */

.vce-panel-toggle {
  position: absolute;
  bottom: var(--LAYOUT--spacing--3);
  z-index: 10;
}

.vce-panel-toggle--test {
  left: var(--LAYOUT--spacing--3);
}

.vce-panel-toggle--deploy {
  right: var(--LAYOUT--spacing--3);
}

.vce-panel {
  position: absolute;
  bottom: var(--LAYOUT--spacing--3);
  width: 350px;
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-radius: var(--LAYOUT--border-radius--lg);
  box-shadow: var(--vce-shadow-lg);
  z-index: 10;
}

.vce-panel--test {
  left: var(--LAYOUT--spacing--3);
}

.vce-panel--deploy {
  right: var(--LAYOUT--spacing--3);
  width: 380px;
  max-height: calc(100vh - 80px);
  overflow: auto;
}

/* ===========================================
 * Empty Canvas State
 * =========================================== */

.vce-empty-canvas {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  padding: var(--LAYOUT--spacing--8);
  max-width: 480px;
  pointer-events: none;
  z-index: 5;
}

/* ===========================================
 * Edge Delete Button
 * =========================================== */

.vce-edge-delete-btn {
  background: var(--COLOR--surface--secondary) !important;
  border: 1px solid var(--COLOR--border--primary) !important;
}

.vce-edge-delete-btn:hover {
  background: var(--COLOR--error--surface--tertiary) !important;
  border-color: var(--COLOR--error--border) !important;
  color: white !important;
}

/* ===========================================
 * Utility Classes
 * =========================================== */

.vce-text-muted {
  color: var(--COLOR--text--disabled);
}
