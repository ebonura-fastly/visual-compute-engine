/*
 * Configure Compute Minimal Styles
 * Only layout + React Flow overrides
 * All component styling comes from beacon-mantine
 * Uses beacon-tokens CSS variables
 */

/* ===========================================
 * App Layout
 * =========================================== */

/* TopNav height token - matches Uniform */
:root {
  --SIZE--TopNav--height: 68px;
}

.cc-app {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--canvas-bg);
}

.cc-main {
  display: flex;
  flex: 1;
  min-height: 0;
  margin-top: var(--SIZE--TopNav--height); /* Account for fixed header */
}

.cc-canvas {
  flex: 1;
  position: relative;
}

/* ===========================================
 * Sidebar Layout - Uniform styling
 * =========================================== */

.cc-sidebar {
  width: 340px;
  background: var(--COLOR--surface--primary);
  border-right: 1px solid var(--COLOR--border--primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.cc-sidebar-tabs-container {
  flex-shrink: 0;
}

.cc-sidebar-tabs {
  display: flex;
  width: 100%;
}

.cc-sidebar-tab {
  flex: 1;
  justify-content: center;
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--2) !important;
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  border-bottom: 2px solid transparent !important;
    color: var(--COLOR--text--secondary) !important;
  transition: color 0.15s ease, border-color 0.15s ease;
}

.cc-sidebar-tab:hover {
  color: var(--COLOR--text--primary) !important;
  background: var(--COLOR--surface--secondary) !important;
}

.cc-sidebar-tab[data-active="true"] {
  color: var(--COLOR--error--text) !important;
  border-bottom-color: var(--COLOR--error--text) !important;
  background: rgba(255, 40, 45, 0.08) !important;
}

.cc-sidebar-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

.cc-sidebar-content > * {
  animation: cc-fade-in 200ms ease-out;
}

@keyframes cc-fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Components Tab */
.cc-components-tab,
.cc-templates-tab {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: var(--LAYOUT--spacing--2);
}

/* Draggable node items - Uniform styling */
.cc-node-item {
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--4);
  padding-left: calc(var(--LAYOUT--spacing--4) + 3px);
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-left: 3px solid var(--node-input-header);
  border-radius: 4px;
  cursor: grab;
  transition: all 130ms ease-in-out;
}

.cc-node-item:hover {
  background: var(--COLOR--surface--secondary);
  border-color: var(--COLOR--border--primary--hover);
}

.cc-node-item:active {
  cursor: grabbing;
  background: var(--COLOR--action--surface--selected);
  border-color: var(--COLOR--action--border);
}

/* Node item category colors */
.cc-node-item[data-category="input"] { border-left-color: var(--node-input-header); }
.cc-node-item[data-category="condition"] { border-left-color: var(--node-condition-header); }
.cc-node-item[data-category="logic"] { border-left-color: var(--node-logic-header); }
.cc-node-item[data-category="action"] { border-left-color: var(--node-action-header); }
.cc-node-item[data-category="routing"] { border-left-color: var(--node-routing-header); }

/* Template cards - Uniform styling */
.cc-template-card {
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--4);
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-radius: 4px;
  cursor: pointer;
  transition: all 130ms ease-in-out;
}

.cc-template-card:hover {
  background: var(--COLOR--surface--secondary);
  border-color: var(--COLOR--border--primary--hover);
}

.cc-template-card:active {
  background: var(--COLOR--action--surface--selected);
  border-color: var(--COLOR--action--border);
}

/* Fastly Tab */
.cc-fastly-content {
  padding: var(--LAYOUT--spacing--4);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: auto;
  gap: var(--LAYOUT--spacing--3);
}

/* ===========================================
 * React Flow Overrides
 * =========================================== */

.react-flow {
  background: var(--canvas-bg) !important;
}

.react-flow__background pattern circle {
  fill: var(--canvas-dots);
}

.react-flow__edge-path {
  stroke: var(--COLOR--border--secondary);
  stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:hover .react-flow__edge-path {
  stroke: var(--COLOR--action--border);
}

/* ===========================================
 * Panels (Test & Deploy)
 * =========================================== */

.cc-panel-toggle {
  position: absolute;
  bottom: var(--LAYOUT--spacing--3);
  z-index: 10;
}

.cc-panel-toggle--test {
  left: var(--LAYOUT--spacing--3);
}

.cc-panel-toggle--deploy {
  right: var(--LAYOUT--spacing--3);
}

.cc-panel {
  position: absolute;
  bottom: var(--LAYOUT--spacing--3);
  width: 350px;
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-radius: var(--LAYOUT--border-radius--lg);
  box-shadow: var(--cc-shadow-lg);
  z-index: 10;
}

.cc-panel--test {
  left: var(--LAYOUT--spacing--3);
}

.cc-panel--deploy {
  right: var(--LAYOUT--spacing--3);
  width: 380px;
  max-height: calc(100vh - 80px);
  overflow: auto;
}

/* ===========================================
 * Empty Canvas State
 * =========================================== */

.cc-empty-canvas {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  padding: var(--LAYOUT--spacing--8);
  max-width: 480px;
  pointer-events: none;
  z-index: 5;
}

/* ===========================================
 * Edge Delete Button
 * =========================================== */

.cc-edge-delete-btn {
  background: var(--COLOR--surface--primary) !important;
  border: 1px solid var(--COLOR--border--secondary) !important;
  box-shadow: var(--SHADOW--shadow--2) !important;
  color: var(--COLOR--text--secondary) !important;
  opacity: 0.8;
  transition: background 130ms ease-in-out, border-color 130ms ease-in-out, color 130ms ease-in-out, opacity 130ms ease-in-out, box-shadow 130ms ease-in-out !important;
  transform: none !important;
}

.cc-edge-delete-btn:hover,
.cc-edge-delete-btn:focus,
.cc-edge-delete-btn:active {
  background: var(--COLOR--error--surface--tertiary) !important;
  border-color: var(--COLOR--error--border) !important;
  color: var(--COLOR--error--text--primary) !important;
  opacity: 1;
  box-shadow: var(--SHADOW--shadow--3) !important;
  transform: none !important;
}

/* ===========================================
 * Node Editor Panel
 * =========================================== */

.cc-node-editor {
  position: absolute;
  top: var(--LAYOUT--spacing--3);
  right: var(--LAYOUT--spacing--3);
  width: 280px;
  background: var(--COLOR--surface--primary);
  border: 1px solid var(--COLOR--border--primary);
  border-radius: var(--LAYOUT--border-radius--md);
  box-shadow: var(--SHADOW--shadow--3);
  z-index: 10;
}

.cc-node-editor-header {
  padding: var(--LAYOUT--spacing--3) var(--LAYOUT--spacing--4);
  border-bottom: 1px solid var(--COLOR--border--primary);
}

.cc-node-editor-form {
  padding: var(--LAYOUT--spacing--4);
}

/* ===========================================
 * Utility Classes
 * =========================================== */

.cc-text-muted {
  color: var(--COLOR--text--disabled);
}

/* ===========================================
 * Filter Icon & Popover
 * =========================================== */

.cc-filter-icon {
  padding: var(--LAYOUT--spacing--1);
  border-radius: var(--LAYOUT--border-radius--sm);
  transition: background 130ms ease-in-out;
}

.cc-filter-icon:hover {
  background: var(--COLOR--surface--secondary);
}

/* Ensure popover dropdown uses correct theme colors */
.mantine-Popover-dropdown {
  background: var(--COLOR--surface--primary) !important;
  border-color: var(--COLOR--border--primary) !important;
}
